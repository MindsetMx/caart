<shared-modal [isOpen]="isOpen()" (isOpenChange)="emitIsOpenChange($event)" [verticalCenter]="true"
  modalMaxWidth="sm:max-w-2xl">
  <div class="relative">
    <h3 class="text-center font-bold text-lg mb-12">Agregar historia del auto</h3>

    <hr class="absolute w-full -bottom-4">
  </div>

  <section class="container no-tailwindcss-base">
    <form [formGroup]="addCarHistoryForm" (ngSubmit)="addCarHistory()" class="space-y-6">
      <div>
        <!-- seleccionar fotos de la galería -->
        <button type="button" (click)="openCarPhotoGallery()" class="block mb-1 text-sm">
          <span class="text-blue-500">Seleccionar fotos de la galería</span>
        </button>

        <label for="title" class="block mb-1 text-sm">Contenido</label>
        <ckeditor formControlName="content" [editor]="Editor"></ckeditor>
        @if (hasError('content')) {
        <shared-input-error [message]="getError('content')"></shared-input-error>
        }
      </div>

      <!-- Extract textarea-->
      <div>
        <label for="extract" class="block mb-1 text-sm">Extracto</label>
        <textarea formControlName="extract" class="w-full h-40" sharedInput></textarea>
        @if (hasError('extract')) {
        <shared-input-error [message]="getError('extract')"></shared-input-error>
        }
      </div>

      <!-- extraInfo -->
      <div>
        <label for="extraInfo" class="block mb-1 text-sm">Información extra</label>
        <textarea formControlName="extraInfo" class="w-full h-40" sharedInput></textarea>
        @if (hasError('extraInfo')) {
        <shared-input-error [message]="getError('extraInfo')"></shared-input-error>
        }
      </div>

      <button class="inline-flex justify-center items-center" type="submit"
        [disabled]="addCarHistorySubmitButtonIsDisabled()" [class.opacity-50]="addCarHistorySubmitButtonIsDisabled()"
        sharedPrimaryButton>
        @if (addCarHistorySubmitButtonIsDisabled()) {
        <shared-spinner></shared-spinner>
        } @else {
        Agregar historia del auto
        }
      </button>
    </form>


  </section>
</shared-modal>

<car-photo-gallery [isOpen]="carPhotoGalleryIsOpen()" (isOpenChange)="closeCarPhotoGallery()"
  [auctionCarId]="originalAuctionCarId()">
</car-photo-gallery>