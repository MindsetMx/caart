<h1 class="font-optima text-4xl font-bold mb-8">Generales y exterior del auto</h1>

<h2 class="text-xl font-bold mb-5">Información general del automóvil</h2>

<form [formGroup]="exteriorOfTheCarForm" (ngSubmit)="exteriorOfTheCarFormSubmit()"
  class="grid grid-cols-2 gap-5 items-end">

  <div>
    <label for="brand" class="block mb-1 text-sm">Marca <span
        class="font-bold text-red-500 inline-block">*</span></label>
    <input id="brand" formControlName="brand" type="text" sharedInput>
    @if (hasError('brand')) {
    <shared-input-error [message]="getError('brand')"></shared-input-error>
    }
  </div>

  <div>
    <label for="carModel" class="block mb-1 text-sm">Modelo <span
        class="font-bold text-red-500 inline-block">*</span></label>
    <input id="carModel" formControlName="carModel" type="text" sharedInput>
    @if (hasError('carModel')) {
    <shared-input-error [message]="getError('carModel')"></shared-input-error>
    }
  </div>

  <div>
    <label for="year" class="block mb-1 text-sm">Año <span class="font-bold text-red-500 inline-block">*</span></label>
    <input id="year" formControlName="year" type="number" min="0" [max]="currentYear" sharedInput>
    @if (hasError('year')) {
    <shared-input-error [message]="getError('year')"></shared-input-error>
    }
  </div>

  <!-- kmInput -->
  <div>
    <label for="kmInput" class="block mb-1 text-sm">Kilometraje <span
        class="font-bold text-red-500 inline-block">*</span></label>
    <input id="kmInput" formControlName="kmInput" type="text" mask="separator.0" thousandSeparator="," sharedInput>
    @if (hasError('kmInput')) {
    <shared-input-error [message]="getError('kmInput')"></shared-input-error>
    }
  </div>


  <!-- Factura / Pedimento select -->
  <div class="col-span-2">
    <label for="invoiceType" class="block mb-1 text-sm">Factura / Pedimento <span
        class="font-bold text-red-500 inline-block">*</span></label>
    <select id="invoiceType" formControlName="invoiceType" sharedInput>
      <!-- <option value="true">Sí</option>
      <option value="false">No</option> -->
      <!-- invoice -->
      <option value="invoice">Factura</option>
      <option value="pediment">Pedimento</option>
      <option value="other">Otro</option>
    </select>
    @if (hasError('invoiceType')) {
    <shared-input-error [message]="getError('invoiceType')"></shared-input-error>
    }
  </div>

  <!-- Explica los detalles de Factura / Pedimiento / Otro textarea -->
  <div class="col-span-2">
    <label for="invoiceDetails" class="block mb-1 text-sm">Explica los detalles de Factura / Pedimiento /
      Otro <span class="font-bold text-red-500 inline-block">*</span></label>
    <textarea id="invoiceDetails" formControlName="invoiceDetails" rows="4" sharedInput
      sharedAutoResizeTextarea></textarea>
    @if (hasError('invoiceDetails')) {
    <shared-input-error [message]="getError('invoiceDetails')"></shared-input-error>
    }
  </div>

  <!-- Car history textarea -->
  <div class="col-span-2">
    <label for="carHistory" class="block mb-1 text-sm">Cuéntanos del exterior del auto <span class="font-bold text-red-500 inline-block">*</span></label>
    <textarea id="carHistory" formControlName="carHistory" rows="6" placeholder="Lo compré hace 5 años, nunca ha tenido choques. La pintura es original, aunque tiene un par de rayones leves en la puerta del copiloto. Le cambié los rines hace un año. En general, luce muy bien y siempre llama la atención en la calle." sharedInput
      sharedAutoResizeTextarea></textarea>
    @if (hasError('carHistory')) {
    <shared-input-error [message]="getError('carHistory')"></shared-input-error>
    }
  </div>


  <!-- Fotos del exterior del auto -->
  <div class="col-span-2">
    <label for="exteriorImagesOrVideos" class="text-sm cursor-pointer">
      Fotos del exterior del auto
      <span class="font-bold text-red-500 inline-block">*</span></label>

    <p class="mb-2 text-sm">Se recomienda subir fotos con orientación horizontal</p>

    <div id="uppyDashboard" #uppyDashboardImages></div>

    @if (hasError('exteriorPhotos')) {
    <shared-input-error [message]="getError('exteriorPhotos')"></shared-input-error>
    }

  </div>

  <!-- Videos del exterior del auto -->
  <div class="col-span-2">
    <label for="exteriorImagesOrVideos" class="text-sm cursor-pointer mb-2 block">
      Videos del exterior del auto
    </label>

    <div id="uppyDashboard" #uppyDashboardVideos></div>

    @if (hasError('exteriorVideos')) {
    <shared-input-error [message]="getError('exteriorVideos')"></shared-input-error>
    }
  </div>

  <div class="col-span-2">
    <button class="flex justify-center mt-4" type="submit" [disabled]="isButtonSubmitDisabled()"
      [class.opacity-50]="isButtonSubmitDisabled()" sharedPrimaryButton>
      @if (isButtonSubmitDisabled()) {
      <shared-spinner></shared-spinner>
      } @else {
      Siguiente
      }
    </button>
  </div>
</form>